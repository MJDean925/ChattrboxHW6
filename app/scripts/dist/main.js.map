{"version":3,"sources":["ws-client.js","app.js","main.js"],"names":["socket","init","url","WebSocket","console","log","registerOpenHandler","handlerFunction","onopen","registerMessageHandler","onmessage","e","data","JSON","parse","sendMessage","payload","send","stringify","ChatApp","message","ChatMessage","serialize","m","user","u","timestamp","t","Date","getTime"],"mappings":";AA0Be,aA1Bf,IAAIA,EAEJ,SAASC,EAAKC,GACVF,EAAS,IAAIG,UAAUD,GACvBE,QAAQC,IAAI,iBAGhB,SAASC,EAAqBC,GAC1BP,EAAOQ,OAAS,WACZJ,QAAQC,IAAI,QACZE,KAIR,SAASE,EAAwBF,GAC7BP,EAAOU,UAAY,SAACC,GAChBP,QAAQC,IAAI,UAAWM,EAAEC,MACrBA,IAAAA,EAAOC,KAAKC,MAAMH,EAAEC,MACxBL,EAAgBK,IAIxB,SAASG,EAAaC,GAClBhB,EAAOiB,KAAKJ,KAAKK,UAAUF,IAGhB,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAAA,IAAA,EAAA,CACXf,KAAAA,EACAK,oBAAAA,EACAG,uBAAAA,EACAM,YAAAA,GAJW,QAAA,QAAA;;ACQAI,aAAAA,OAAAA,eAAAA,QAAAA,aAAAA,CAAAA,OAAAA,IAAAA,QAAAA,aAAAA,EAlCf,IAAA,EAAA,EAAA,QAAA,gBAkCeA,SAAAA,EAAAA,GAAAA,OAAAA,GAAAA,EAAAA,WAAAA,EAAAA,CAAAA,QAAAA,GAAAA,SAAAA,EAAAA,EAAAA,GAAAA,IAAAA,IAAAA,EAAAA,EAAAA,EAAAA,EAAAA,OAAAA,IAAAA,CAAAA,IAAAA,EAAAA,EAAAA,GAAAA,EAAAA,WAAAA,EAAAA,aAAAA,EAAAA,EAAAA,cAAAA,EAAAA,UAAAA,IAAAA,EAAAA,UAAAA,GAAAA,OAAAA,eAAAA,EAAAA,EAAAA,IAAAA,IAAAA,SAAAA,EAAAA,EAAAA,EAAAA,GAAAA,OAAAA,GAAAA,EAAAA,EAAAA,UAAAA,GAAAA,GAAAA,EAAAA,EAAAA,GAAAA,EAAAA,SAAAA,EAAAA,EAAAA,GAAAA,KAAAA,aAAAA,GAAAA,MAAAA,IAAAA,UAAAA,qCAhCTA,IAAAA,EACF,SAAc,IAAA,EAAA,KAAA,GACHlB,EAAAA,QAAAA,KAAK,uBACLK,EAAAA,QAAAA,oBAAoB,WACnBc,IAAAA,EAAU,IAAIC,EAAY,CAAED,QAAS,SAClCL,EAAAA,QAAAA,YAAYK,EAAQE,eAExBb,EAAAA,QAAAA,uBAAuB,SAACG,GAC3BR,QAAQC,IAAIO,MAKlBS,EAAAA,WAKA,SAAA,EAAA,GAHWE,IAAAA,EAATH,EAAAA,QACAI,EAAAA,EAAAA,KAAMC,OAAE,IAAA,EAAA,SAEV,EADEC,EAAAA,EAAAA,UAAWC,OAAG,IAAA,GAAA,IAAIC,MAAQC,UAC5B,EAAA,EAAA,KAAA,GACOT,KAAAA,QAAUG,EACVC,KAAAA,KAAOC,EACPC,KAAAA,UAAYC,EAWVR,OAAAA,EAAAA,EAAAA,CAAAA,CAAAA,IAAAA,YATC,MAAA,WACD,MAAA,CACHK,KAAM,KAAKA,KACXJ,QAAS,KAAKA,QACdM,UAAW,KAAKA,eAKbP,EAnBTE,GAmBSF,EAAAA,EAAAA,QAAAA,QAAAA;;ACjCf,aADA,IAAA,EAAA,EAAA,QAAA,UACA,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAAA,IAAIA,EAAJ","file":"main.js","sourceRoot":"../src","sourcesContent":["let socket;\n\nfunction init(url) {\n    socket = new WebSocket(url);\n    console.log('connecting...');\n}\n\nfunction registerOpenHandler (handlerFunction){\n    socket.onopen = () => {\n        console.log('open');\n        handlerFunction();\n    }\n}\n\nfunction registerMessageHandler (handlerFunction){\n    socket.onmessage = (e) => {\n        console.log('message', e.data);\n        let data = JSON.parse(e.data);\n        handlerFunction(data);\n    }\n}\n\nfunction sendMessage (payload) {\n    socket.send(JSON.stringify(payload));\n}\n\nexport default {\n    init,\n    registerOpenHandler,\n    registerMessageHandler,\n    sendMessage\n}","import socket from './ws-client';\n\nclass ChatApp {\n    constructor() {\n        socket.init('ws://localhost:3001');\n        socket.registerOpenHandler(() => {\n            let message = new ChatMessage({ message: 'pow!' });\n            socket.sendMessage(message.serialize());\n        });\n        socket.registerMessageHandler((data) => {\n            console.log(data);\n        });\n    }\n}\n\nclass ChatMessage {\n    constructor({\n        message: m, \n        user: u='batman',\n        timestamp: t=(new Date()).getTime()\n    }){\n        this.message = m;\n        this.user = u;\n        this.timestamp = t;\n    }\n    serialize() {\n        return {\n            user: this.user,\n            message: this.message,\n            timestamp: this.timestamp\n        };\n    }\n}\n\nexport default ChatApp;","import ChatApp from './app';\nnew ChatApp();"]}